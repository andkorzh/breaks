# Шина данных

![6502_locator_data](/BreakingNESWiki/imgstore/6502/6502_locator_data.jpg)

Схемы для работы с внешней шиной данных состоят из 8 одинаковых кусков:

![6502_data_bit_tran](/BreakingNESWiki/imgstore/6502_data_bit_tran.jpg)

(Показана схема для разряда 0, остальные аналогично)

- DOR: Защёлка DOR хранит выходное значение которое будет размещено на контактах шины D0-D7. Если RD=1 - комплементарные выходные линии с DOR отрубаются, таким образом вся выходная часть становится floating.
- DL: Защёлка DL хранит входное значение
- Рядом с контрольным сигналом `DL/DB` можно заметить precharge транзистор для внутренней шины DB

Контрольные сигналы:
- DL/ADL: Поместить значение защёлки DL на внутреннюю шину ADL
- DL/ADH: Поместить значение защёлки DL на внутреннюю шину ADH
- DL/DB: В режиме чтения (RD=1) значение с защёлки DL помещается на внутреннюю шину DB. В режиме записи (RD=0) значение с шины DB помещается на защёлку DOR

Внешняя шина данных (контакты D0-D7) также напрямую соединяется со входом схемы [предекодирования](predecode.md).

Оптимизированная логическая схема:

![11_6502_data_bit_tran](/BreakingNESWiki/imgstore/6502/ttlworks/11_6502_data_bit_tran.png)

## Защёлка WR

Со схемы управления контактом R/W на схему защёлки приходит контрольный сигнал `WR`. На выходе схемы контрольный сигнал `RD`, который управляет направлением внешней шины данных.

![6502_wr_latch_tran](/BreakingNESWiki/imgstore/6502_wr_latch_tran.jpg)

Оптимизированная логическая схема:

![12_6502_wr_latch_tran](/BreakingNESWiki/imgstore/6502/ttlworks/12_6502_wr_latch_tran.png)
